<canvas id=c width="1280" height="720"></canvas>
<video id=v  autoplay playsinline>
</video>
<iframe width="1280" height="720" src="https://www.youtube.com/embed/gUmoJ-kTDHs?controls=0&amp;start=13" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>


<script>
    const constraints = {
  video: true
};

const v = document.querySelector('video');

navigator.mediaDevices.getUserMedia(constraints).
then((stream) => {v.srcObject = stream});

    document.addEventListener('DOMContentLoaded', function(){
        var v = document.getElementById('v');
        var canvas = document.getElementById('c');
        var context = canvas.getContext('2d');
    
        // var cw = Math.floor(canvas.clientWidth / 100);
        // var ch = Math.floor(canvas.clientHeight / 100);
        // canvas.width = cw;
        // canvas.height = ch;
    
        v.addEventListener('play', function(){
            draw(this,context,1280,720);
        },false);
    
    },false);
    
    function draw(v,c,w,h) {
        if(v.paused || v.ended) return false;
        c.drawImage(v,0,0,w,h);
        setTimeout(draw,20,v,c,w,h);
    }

    function drawEmbossed(v,c,bc,cw,ch) {
        if(v.paused || v.ended) return false;
        // First, draw it into the backing canvas
        bc.drawImage(v,0,0,cw,ch);
        // Grab the pixel data from the backing canvas
        var idata = bc.getImageData(0,0,cw,ch);
        var data = idata.data;
        var w = idata.width;
        var limit = data.length
        // Loop through the subpixels, convoluting each using an edge-detection matrix.
        for(var i = 0; i < limit; i++) {
            if( i%4 == 3 ) continue;
            data[i] = 127 + 2*data[i] - data[i + 4] - data[i + w*4];
        }
        // Draw the pixels onto the visible canvas
        c.putImageData(idata,0,0);
        // Start over!
        setTimeout(draw,20,v,c,bc,cw,ch);
    }
</script>

<style>
    video {
        left: 10px;
        top: 10px;
        position: absolute;
        mix-blend-mode: difference;
        animation: othershit 15s infinite;
    }
    canvas {
        animation: hueshit 10s infinite;
    }

    iframe {
        position: absolute;
        left: 0;
        filter: grayscale(1) contrast(100);
        mix-blend-mode: difference;
    }

    @keyframes hueshit {
        to {
            filter:  hue-rotate(360deg) contrast(100) ;
        }
    }

    @keyframes othershit {
        to {
            filter:   sepia(100) blur(100);
        }
    }
</style>